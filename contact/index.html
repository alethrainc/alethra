<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALETHRA - Contact</title>
    
<script src="https://cdn.tailwindcss.com"></script>
    
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link rel="stylesheet" href="/animation.css">    
<script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // PRIMARY COLOR VARIABLE
                        'klyr-red': '#E72F3C',
                        // DARK TEXT COLOR VARIABLE
                        'klyr-dark': '#1F2937',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
    
        /* =================================================================== */
        /* FIX: Ensures cards align horizontally by normalizing description height */
        /* =================================================================== */
        @media (min-width: 768px) {
            .description-alignment-fix {
                /* Min-height large enough for 2 lines of text-lg */
                min-height: 3.5rem; 
            }
        }
        .skiptranslate {
            display: none!important;
        }
        /* ===================================================================
        GLOBAL STYLING
        =================================================================== */
        
        /* --- CONFIGURATION VARIABLES FOR INDENTATION & SPACING --- */
        /* Adjust these values (in pixels) to control the mobile navigation layout */
        :root { 
            --mobile-indent-px: 32px; /* Indentation for sub-menu items */
            --mobile-group-spacing-px: 18px; /* Vertical space *between* main mobile groups */
            /* Padding for sub-links to make them cleaner (was 48px) */
            --mobile-sub-item-py: 16px; /* Vertical padding (top/bottom) for mobile sub-links (controls space *between* sub-links) */
            --site-max-width: 1100px; 
            --nav-footer-max-width: 2000px; 
        }

        .nav-item:hover {
            color: #E72F3C;
        }
        /* -------------------------------------------------- */

        /* Ensures Inter font loads smoothly */
        @import url('https://fonts.fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: white;
        }

        /* Custom class for standard content width */
        .max-w-site {
            max-width: var(--site-max-width);
        }

        /* Custom class for header and footer content width */
        .max-w-super-wide {
            max-width: var(--nav-footer-max-width);
        }
        
        /* Applying variables to crisis cards */
        .crisis-card-style {
            background-color: #f9f9f9; 
            box-shadow: 0 0px 0px rgba(0, 0, 0, 0.08);
        }
        
        /* Applying variables to content box */
        #content-box.content-box-border-style {
            border: 4px solid var(--klyr-red) !important;
        }

        /* CRITICAL: HIDES GOOGLE TRANSLATE UI ELEMENTS */
        #google_translate_element, 
        .goog-te-gadget,
        .goog-te-banner-frame {
            display: none !important;
            visibility: hidden !important;
        }
        body { top: 0px !important; position: relative !important; }

        /* ===================================================================
        NAVIGATION & DROPDOWN STYLES
        =================================================================== */
        /* Desktop Navigation Item Base Style */
        /* FIX: Explicitly set base color to klyr-dark for full visibility of hover transition */
        .nav-item {
            @apply text-klyr-dark hover:text-klyr-red transition duration-150 whitespace-nowrap;
        }
        
        /* Mobile Accordion Wrapper (Main Navigation Items) */
        .mobile-dropdown-group {
            @apply border-b border-gray-100;
        }
        /* Add spacing between the main navigation items, but not before the first one */
        .mobile-dropdown-group:not(:first-child) {
            margin-top: var(--mobile-group-spacing-px);
        }
        
        /* Consolidated Mobile Item Base Style for Links and Buttons */
        .mobile-nav-item-base {
            @apply w-full flex justify-between items-center text-left text-base font-medium text-klyr-dark hover:text-klyr-red py-3 pr-0 transition duration-150;
        }
        
        /* Mobile Collapsible Content Area (CRITICAL HIDING CSS) */
        .mobile-dropdown-content {
            /* max-height: 0 is the starting state */
            max-height: 0; 
            /* Opacity starts at 0 */
            opacity: 0; 
            
            /* Use the variable defined at the top for indentation */
            padding-left: var(--mobile-indent-px);
            /* transition-all includes max-height and opacity/transform */
            @apply overflow-hidden bg-gray-50 transition-all duration-300; 
        }
        
        /* Class added by JS when the accordion is OPEN */
        .mobile-dropdown-content.open {
            opacity: 1;
            pointer-events: auto; 
            /* max-height set inline by JS when opening, not here */
        }

        /* Mobile Sub-Item Links (Dropdown Links) - Base style, no border here */
        .mobile-sub-item {
            /* Now uses CSS variable for vertical padding (controlling space between sub-items) */
            padding-top: var(--mobile-sub-item-py);
            padding-bottom: var(--mobile-sub-item-py);
            /* Base styles */
            @apply block text-sm text-klyr-dark hover:text-klyr-red uppercase; 
        }
        
        /* FIX: Apply border-top ONLY to sub-items that are NOT the first child.
            This creates a single, clean dividing line BETWEEN items. */
        .mobile-dropdown-content .mobile-sub-item:not(:first-child) {
            @apply border-t border-gray-300; 
        }

    </style>
</head>
<body>

    
<div id="google_translate_element"></div>
    <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'en',
                autoDisplay: false,
                layout: google.translate.TranslateElement.InlineLayout.HORIZONTAL
            }, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>


    
<div class="bg-white shadow-sm sticky top-0 z-50" id="nav-placeholder"></div>

    <main class="">
    <!-- 
                1. HERO SECTION 
                Rules: 
                - padding-top: desktop 6rem (pt-24), mobile 4rem (pt-16)
                - padding-bottom: desktop 3rem (pb-12), mobile 2rem (pb-8)
            -->
            <section class="max-w-site mx-auto px-4 sm:px-6 lg:px-8 pt-16 md:pt-24 pb-8 md:pb-12">
                <div class="grid md:grid-cols-2 gap-8 md:gap-12 items-start">
                    <!-- Left Content -->
                    <div class="flex flex-col justify-center space-y-6">
                        <h1 class="text-3xl md:text-5xl font-extrabold tracking-tight leading-tight text-klyr-dark uppercase">
                            CONTACT<br>
                            <span class="text-klyr-red">ALETHRAâ„¢</span>
                        </h1>
                        <p class="text-lg text-gray-700 leading-relaxed max-w-lg">
                            For enterprise deployments, regulatory collaboration, partnerships, or media inquiries, our team is ready to help.
                        </p>
                    </div>
                    
                    <!-- Right Content: Image -->
                    <div class="relative">
                        <!-- Placeholder for the woman image from screenshot 1 -->
                        <!-- Using a div with background/content to simulate the layout if exact asset isn't available, 
                             but here using an img tag structure. -->
                        <div class="relative rounded-lg overflow-hidden bg-gray-50">
                            <!-- Using a placeholder image that resembles a professional woman -->
                             <!-- Fallback approach for specific image request -->
                            <img src="https://plusbrand.com/wp-content/uploads/2025/11/Aletha-1.webp" alt="ALETHRA AI Specialist" class="w-full h-auto object-cover object-right" style="max-height: 400px;" onerror="this.src='https://placehold.co/600x400/f3f4f6/1F2937?text=ALETHRA+Representative'">
                            
                            <!-- Text removed as per request to avoid overlap -->
                        </div>
                    </div>
                </div>

                <!-- CTA Button Moved Below Grid -->
                <div class="mt-8 md:mt-12">
                    <a href="/enterprise" class="inline-block bg-klyr-red hover:bg-red-700 text-white font-bold py-3 px-6 rounded shadow transition duration-300 text-center uppercase text-sm tracking-wider">
                        REQUEST ENTERPRISE ACCESS
                    </a>
                </div>
            </section>

            <!-- 
                2. HOW CAN WE HELP SECTION
                Rules:
                - Padding between content: desktop 3rem, mobile 2rem.
                - Implemented by ensuring previous section has pb-12/pb-8 and this starts with pt-0.
                - Total vertical whitespace matches combined section gap rule.
            -->
            <section class="max-w-site mx-auto px-4 sm:px-6 lg:px-8 pt-0 pb-8 md:pb-12">
                <!-- Header - Red underline removed -->
                <div class="mb-8 md:mb-12">
                    <h2 class="text-3xl md:text-4xl font-extrabold text-klyr-dark uppercase inline-block pb-2">
                        HOW CAN WE HELP?
                    </h2>
                </div>

                <!-- 2 Column Grid (Split: Col 1 [Item 1 & 3], Col 2 [Item 2]) -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12 relative">
                    
                    <!-- COLUMN 1: Enterprise (1) & Media (3) -->
                    <div class="flex flex-col gap-10">
                        
                        <!-- Item 1: Enterprise -->
                        <!-- Relative container needed for the absolute line -->
                        <div class="flex flex-col items-start relative">
                            <!-- Custom Vertical Line: spans full height, positioned -right-6 (1.5rem) to center in the 3rem gap -->
                            <div class="hidden md:block absolute -right-6 top-0 bottom-0 w-[2px] bg-black"></div>
                            
                            <!-- CONTENT BLOCK (Title + P) -->
                            <div class="w-full mb-6 pr-8">
                                <h3 class="font-bold text-lg text-klyr-dark mb-3">1. Enterprise & Product Inquiries</h3>
                                <p class="text-gray-700 text-lg leading-relaxed">
                                    For hospitals, farms, factories, labs, logistics networks, construction firms, and government agencies deploying <span class="text-klyr-red">ALETHRAâ„¢</span>.
                                </p>
                            </div>
                            
                            <!-- Button: 70% width -->
                            <a href="/enterprise" class="block w-[70%] bg-klyr-red hover:bg-red-700 text-white font-bold py-3 px-6 rounded shadow transition duration-300 text-center uppercase text-sm tracking-wider">
                                REQUEST ENTERPRISE ACCESS
                            </a>
                        </div>

                        <!-- Item 3: Media & Communications (Moved here) -->
                        <div class="flex flex-col items-start relative">
                            <!-- Custom Vertical Line: spans full height, positioned -right-6 (1.5rem) to center in the 3rem gap -->
                            <div class="hidden md:block absolute -right-6 top-0 bottom-0 w-[2px] bg-black"></div>

                            <!-- CONTENT BLOCK (Title + P) -->
                            <div class="w-full mb-6 pr-8">
                                <h3 class="font-bold text-lg text-klyr-dark mb-3">3. Media & Communications</h3>
                                <p class="text-gray-700 text-lg leading-relaxed">
                                    For journalists, analysts, event organizers, and partners seeking official statements or interviews.
                                </p>
                            </div>
                            
                            <!-- Button: 70% width -->
                            <a href="/interview" class="block w-[70%] bg-klyr-red hover:bg-red-700 text-white font-bold py-3 px-6 rounded shadow transition duration-300 text-center uppercase text-sm tracking-wider">
                                CONTACT COMMUNICATIONS
                            </a>
                        </div>

                    </div>

                    <!-- COLUMN 2: Regulatory (2) -->
                    <div>
                        <!-- Item 2: Regulatory -->
                        <div class="flex flex-col items-start relative md:pl-4">
                            <!-- No border needed here -->
                            <div class="w-full mb-6">
                                <h3 class="font-bold text-lg text-klyr-dark mb-3">2. Regulatory & Standards Collaboration</h3>
                                <p class="text-gray-700 text-lg leading-relaxed">
                                    For government agencies, compliance bodies, and institutions working with <span class="text-klyr-red">ALETHRAâ„¢</span> on clarity frameworks and verification standards.
                                </p>
                            </div>
                            <!-- Button: 80% width as requested to fit text on one line -->
                            <a href="/regulatory" class="block w-[80%] bg-klyr-red hover:bg-red-700 text-white font-bold py-3 px-6 rounded shadow transition duration-300 text-center uppercase text-sm tracking-wider">
                                CONNECT WITH OUR REGULATORY TEAM
                            </a>
                        </div>
                    </div>

                </div>
            </section>

            <!-- 
                3. CONTACT FORM SECTION
                Rules:
                - Padding between content: desktop 3rem, mobile 2rem.
            -->
           <section class="max-w-site mx-auto px-4 sm:px-6 lg:px-8 pt-0 pb-8 md:pb-12">
                <h2 class="text-3xl md:text-4xl font-extrabold text-klyr-dark uppercase mb-8 md:mb-12">
                    REACH OUT DIRECTLY
                </h2>

                <div class="w-full" id="contact-form-container">
                    
                    <!-- Styled Container based on provided code -->
                    <div class="max-w-3xl mx-auto bg-white p-6 sm:p-10 md:p-12 rounded-3xl shadow-xl border border-gray-100">
                        
                        <!-- Success Message (Hidden by default) -->
                        <div id="success-message" class="hidden text-center py-20 fade-in-section">
                            <h3 class="text-3xl font-extrabold text-klyr-dark uppercase">
                                THANK YOU FOR YOUR INQUIRY
                            </h3>
                            <p class="mt-4 text-gray-600 text-lg leading-relaxed">
                              We'll get back to you really soon.
                            </p>
                        </div>

                        <!-- FORM -->
                        <form id="contact-form" class="space-y-6">
  <input type="hidden" name="form-id" value="contact-form">

  <div id="form-content" class="space-y-6">

    <!-- Full Name -->
    <div>
      <label for="fullname" class="block text-sm font-bold text-klyr-dark mb-2 ml-1">
        Full Name
      </label>
      <input
        type="text"
        id="fullname"
        name="fullname"
        required
        class="block w-full rounded-xl border border-gray-300 shadow-sm focus:border-klyr-red focus:ring-klyr-red text-base p-4 placeholder-gray-400 transition duration-200"
      >
    </div>

    <!-- Organization -->
    <div>
      <label for="organization" class="block text-sm font-bold text-klyr-dark mb-2 ml-1">
        Organization
      </label>
      <input
        type="text"
        id="organization"
        name="organization"
        class="block w-full rounded-xl border border-gray-300 shadow-sm focus:border-klyr-red focus:ring-klyr-red text-base p-4 placeholder-gray-400 transition duration-200"
      >
    </div>

    <!-- Email -->
    <div>
      <label for="email" class="block text-sm font-bold text-klyr-dark mb-2 ml-1">
        Email
      </label>
      <input
        type="email"
        id="official-email"
        name="official-email"
        required
        class="block w-full rounded-xl border border-gray-300 shadow-sm focus:border-klyr-red focus:ring-klyr-red text-base p-4 placeholder-gray-400 transition duration-200"
      >
    </div>

    <!-- Country / Region -->
    <div>
      <label class="block text-sm font-bold text-klyr-dark mb-2 ml-1">
        Country / Region
      </label>
      <div class="relative">
        <!-- Hidden input used by JS + FormData -->
        <input
          type="hidden"
          id="contact-country-hidden"
          name="country"
          required
        >

        <button
          type="button"
          id="contact-country-display-btn"
          onclick="openContactModal()"
          class="block w-full rounded-xl border border-gray-300 shadow-sm focus:border-klyr-red focus:ring-klyr-red text-base p-4 text-gray-400 text-left transition duration-150 hover:bg-gray-50 bg-white"
          aria-haspopup="true"
          aria-expanded="false"
        >
          Select Country / Region
        </button>

        <div class="absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none text-gray-500">
          <i class="fas fa-chevron-down text-sm"></i>
        </div>
      </div>
    </div>

    <!-- Inquiry Type -->
    <div>
      <label for="inquiry-type" class="block text-sm font-bold text-klyr-dark mb-2 ml-1">
        Inquiry Type
      </label>
      <select
        id="inquiry-type"
        name="inquiry_type"
        class="block w-full rounded-xl border border-gray-300 shadow-sm focus:border-klyr-red focus:ring-klyr-red text-base p-4 bg-white transition duration-200"
      >
        <option value="" disabled selected>Select an option</option>
        <option value="enterprise">Enterprise</option>
        <option value="regulatory">Regulatory</option>
        <option value="partnership">Partnership</option>
        <option value="media">Media</option>
        <option value="general">General</option>
      </select>
    </div>

    <!-- Message (OPTIONAL) -->
    <div>
      <label for="message" class="block text-sm font-bold text-klyr-dark mb-2 ml-1">
        Message
      </label>
      <textarea
        id="message"
        name="message"
        rows="6"
        class="block w-full rounded-xl border border-gray-300 shadow-sm focus:border-klyr-red focus:ring-klyr-red text-base p-4 placeholder-gray-400 transition duration-200"
      ></textarea>
    </div>

    <!-- Submit -->
    <div class="pt-4">
      <button
        type="submit"
        class="w-full bg-klyr-red hover:bg-red-600 active:bg-red-700 text-white font-bold py-3 px-6 rounded-xl shadow-lg transition duration-300 transform hover:scale-[1.01] uppercase tracking-wider text-lg"
      >
        SUBMIT INQUIRY
      </button>
    </div>

  </div>
</form>

                    </div>

                </div>
            </section>
            <!-- 
                4. RESPONSE TIMES SECTION
                Rules:
                - Padding between content: desktop 3rem, mobile 2rem.
            -->
            <section class="max-w-site mx-auto px-4 sm:px-6 lg:px-8 pt-0 pb-8 md:pb-12">
                <h2 class="text-3xl md:text-4xl font-extrabold text-klyr-dark uppercase mb-4">
                    RESPONSE TIMES
                </h2>
                <p class="text-lg text-gray-800 leading-relaxed font-medium">
                    We prioritize clarity - including communication.<br>
                    Our team responds to enterprise, regulatory, and media inquiries within <span class="text-klyr-red font-bold">24 hours.</span>
                </p>
            </section>

            <!-- 
                5. CTA BANNER (Full Width)
                Rules:
                - Padding between content: desktop 3rem, mobile 2rem (margin-top handled by previous section pb).
                - This section has its own internal padding.
            -->
            <section class="w-full bg-klyr-red py-12 md:py-16">
                <div class="max-w-site mx-auto px-4 sm:px-6 lg:px-8 text-left">
                    <h2 class="text-3xl md:text-5xl font-extrabold text-white uppercase mb-8 leading-tight">
                        READY TO BRING CLARITY TO YOUR<br class="hidden md:block"> ORGANIZATION?
                    </h2>
                    <div class="flex flex-col sm:flex-row gap-4">
                        <a href="#" class="inline-block bg-white hover:bg-gray-100 text-klyr-red font-bold py-3 px-8 rounded shadow transition duration-300 text-center uppercase text-sm tracking-wider">
                            REQUEST ENTERPRISE ACCESS
                        </a>
                        <a href="#" class="inline-block bg-white hover:bg-gray-100 text-klyr-red font-bold py-3 px-8 rounded shadow transition duration-300 text-center uppercase text-sm tracking-wider">
                            TALK TO OUR TEAM
                        </a>
                    </div>
                </div>
            </section>
            
       </div></main>

    
<div id="country-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-[100] hidden opacity-0 modal-transition">
        <div id="modal-content" class="bg-white rounded-2xl shadow-2xl w-11/12 max-w-4xl p-8 relative transform scale-95 modal-transition">
            
<button id="close-modal-btn" class="absolute top-6 left-6 text-gray-500 hover:text-klyr-red transition duration-150">
                <i class="fas fa-times text-2xl"></i>
            </button>
            
            
<div id="country-list-container" class="mt-12 grid grid-cols-2 md:grid-cols-3 gap-x-10 gap-y-4 max-h-[70vh] overflow-y-auto pt-4 pb-2">
                
</div>
        </div>
    </div>

      <!-- UPDATED MODAL STRUCTURE FOR SEARCHABLE COUNTRY LIST (IDS ARE NOW PREFIXED) -->
<div id="regulatory-country-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-[100] hidden opacity-0 modal-transition">
    <!-- max-w-lg for a better, tighter list experience (ID UPDATED) -->
    <div id="regulatory-modal-content" class="bg-white rounded-2xl shadow-2xl w-11/12 max-w-lg p-6 sm:p-8 relative transform scale-95 modal-transition">
        
        <!-- FIX 1: HEADER (Title and Close Button inline to prevent overlap) -->
        <div class="flex justify-between items-center mb-6">
            
            <!-- Close button (ID UPDATED & onclick ADDED) -->
            <button type="button" id="regulatory-close-modal-btn" 
                    onclick="closeContactModal()"
                    class="text-gray-500 hover:text-klyr-red transition duration-150 p-2 -mr-2 z-10">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>

        <!-- Search Bar (ID UPDATED) -->
        <div class="relative mb-4">
            <input type="text" id="regulatory-country-search-input" placeholder="Search"
                   class="w-full rounded-xl border border-gray-300 bg-gray-50 shadow-inner focus:border-klyr-red focus:ring-klyr-red text-base p-4 pl-12 placeholder-gray-500">
            <!-- Search Icon -->
            <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
        </div>
        
        <!-- Country List Container (ID UPDATED) -->
        <div id="regulatory-country-list-container" class="space-y-1 max-h-[60vh] overflow-y-auto pt-4 pb-2">
            <!-- List items will be dynamically injected here by JS -->
        </div>
    </div>
</div>
    
    
<div id="footer-placeholder"></div>
<script src="/animation.js"></script>
<script src="/nav-logic.js"></script>
<script src="/inject.js"></script>
<script src="/symbol-formatter.js"></script>
<script type="text/javascript">

    // ===================================================================
    // FORM LOGIC
    // ===================================================================

const FORM_ID = 'contact-form';
const form = document.getElementById(FORM_ID);
const formContent = document.getElementById('form-content');
const successMessage = document.getElementById('success-message');

if (form) {
    function isEmail(s) {
        return typeof s === 'string' && /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s);
    }

    function serializeForm(formEl) {
        const fd = new FormData(formEl);
        const out = {};
        for (const [k,v] of fd.entries()) {
            if (out[k]) {
                if (!Array.isArray(out[k])) out[k] = [out[k]];
                out[k].push(v);
            } else {
                out[k] = v;
            }
        }
        return out;
    }

    let isSubmitting = false;

    async function handleSubmit(e) {
        e.preventDefault();
        if (isSubmitting) return;
        isSubmitting = true;

        const submitBtn = form.querySelector('[type="submit"]');
        const originalBtnText = submitBtn ? submitBtn.innerHTML : null;
        if (submitBtn) {
            submitBtn.disabled = true;
            submitBtn.setAttribute('aria-disabled','true');
            submitBtn.innerHTML = 'Sending...';
        }

        const values = serializeForm(form);
        const email = values['official-email'] || values['official_email'] || values['email'];

        // required fields
        const required = ['fullname','official-email'];
        for (const r of required) {
            if (r === 'consent') {
                const c = form.querySelector('#consent');
                if (!c || !c.checked) {
                    alert('Please accept the consent to continue.');
                    resetSubmitState();
                    return;
                }
                continue;
            }
            if (!values[r] || (typeof values[r]==='string' && values[r].trim()==='')) {
                alert('Please complete all required fields.');
                resetSubmitState();
                return;
            }
        }

        if (!email || !isEmail(email)) {
            alert('Please enter a valid email address.');
            resetSubmitState();
            return;
        }

        values._submitted_at = new Date().toISOString();

        try {
            const res = await fetch('/api/form-submit', {
                method:'POST',
                headers: {'Content-Type':'application/json'},
                body: JSON.stringify(values),
                credentials:'same-origin'
            });

            if (!res.ok) {
                const txt = await res.text();
                const parsed = (()=>{ try{return JSON.parse(txt)}catch{return txt} })();
                alert(parsed?.error || 'Submission failed. Please try again later.');
                resetSubmitState();
                return;
            }

            // CRM sync
            try {
                if(navigator.sendBeacon){
                    const blob = new Blob([JSON.stringify(values)], {type:'application/json'});
                    navigator.sendBeacon('/api/form-crm', blob);
                } else {
                    fetch('/api/form-crm',{method:'POST',keepalive:true,headers:{'Content-Type':'application/json'},body:JSON.stringify(values)})
                    .catch(err=>console.warn('CRM sync failed',err));
                }
            } catch(err) { console.warn('CRM sync error',err); }

            // success UI
            if(formContent) formContent.classList.add('hidden');
            if(successMessage) successMessage.classList.remove('hidden');
            form.scrollIntoView({behavior:'smooth'});

        } catch(err) {
            console.error(err);
            alert('Unexpected error. Please try again later.');
            resetSubmitState();
        }

        function resetSubmitState() {
            isSubmitting = false;
            if(submitBtn){
                submitBtn.disabled = false;
                submitBtn.removeAttribute('aria-disabled');
                submitBtn.innerHTML = originalBtnText;
            }
        }
    }

    form.addEventListener('submit', handleSubmit);
}
</script>

<!-- New script for Country Selection Modal Logic and Form/Scroll Handling -->
<script>
    // ===================================================================
    // COUNTRY SELECTION MODAL LOGIC (UPDATED WITH UNIQUE regulatory- PREFIXED IDs and FUNCTIONS)
    // ===================================================================

    // Helper to get the English part of the name for consistent sorting and searching
    const getSortKey = (name) => {
        // This handles cases like "Brazil | Brasil" or "Global ðŸŒŽ"
        return name.split('|')[0].trim().replace('ðŸŒŽ', '').trim();
    };

    // Define all country/region names and their associated display codes
    const nameCodeMap = {
        "United States of America": "+1",
        "Mexico | MÃ©xico": "+52",
        "Canada | (English)": "+1",
        "Canada | Le Canada (FranÃ§ais)": "+1",
        "Global ðŸŒŽ": "N/A",
        "Argentina": "+54",
        "Australia & New Zealand": "+61",
        "Belgium": "+32",
        "Brazil | Brasil": "+55",
        "Central America & Caribbean | AmÃ©rica Central y el Caribe": "+XX",
        "Chile": "+56",
        "China | ä¸­å›½": "+86",
        "Colombia": "+57",
        "Croatia": "+385",
        "Czech Republic": "+420",
        "Ecuador": "+593",
        "Finland": "+358",
        "France": "+33",
        "Germany, Austria, Switzerland | Deutschland, Ã–sterreich, Schweiz": "+49",
        "Greece": "+30",
        "Hungary": "+36",
        "India": "+91",
        "Indonesia": "+62",
        "Ireland": "+353",
        "Italy | Italia": "+39",
        "Japan | æ—¥æœ¬": "+81",
        "Latvia": "+371",
        "Maghreb | Le Maghreb": "+XX",
        "Malaysia": "+60",
        "Netherlands": "+31",
        "Norway": "+47",
        "Pakistan": "+92",
        "Paraguay": "+595",
        "Peru | PerÃº": "+51",
        "Philippines": "+63",
        "Poland": "+48",
        "Portugal": "+351",
        "Romania": "+40",
        "Saudi Arabia": "+966",
        "Serbia": "+381",
        "Singapore": "+65",
        "Slovakia": "+421",
        "South Africa": "+27",
        "South Korea": "+82",
        "Spain | EspaÃ±a": "+34",
        "Sweden | Sverige": "+46",
        "Switzerland | Suisse (FranÃ§ais)": "+41",
        "Taiwan": "+886",
        "Thailand": "+66",
        "Turkey | TÃ¼rkiye": "+90",
        "Ukraine": "+380",
        "United Kingdom": "+44",
        "Venezuela": "+58",
        "Vietnam": "+84"
    };

    const allNames = [
        "United States of America",
        "Mexico",
        "Canada",
        "Argentina",
        "Australia & New Zealand",
        "Austria | Ã–sterreich",
        "Belgium",
        "Brazil | Brasil",
        "Central America & Caribbean | AmÃ©rica Central y el Caribe",
        "Chile",
        "China | ä¸­å›½",
        "Colombia",
        "Croatia",
        "Czech Republic",
        "Ecuador",
        "Finland",
        "France",
        "Germany | Deutschland",
        "Greece",
        "Hungary",
        "India",
        "Indonesia",
        "Ireland",
        "Italy | Italia",
        "Japan | æ—¥æœ¬",
        "Latvia",
        "Maghreb | Le Maghreb",
        "Malaysia",
        "Netherlands",
        "Norway",
        "Pakistan",
        "Paraguay",
        "Peru | PerÃº",
        "Philippines",
        "Poland",
        "Portugal",
        "Romania",
        "Saudi Arabia",
        "Serbia",
        "Singapore",
        "Slovakia",
        "South Africa",
        "South Korea",
        "Spain | EspaÃ±a",
        "Sweden | Sverige",
        "Switzerland | Schweiz",
        "Taiwan",
        "Thailand",
        "Turkey | TÃ¼rkiye",
        "Ukraine",
        "United Kingdom",
        "Venezuela",
        "Vietnam"
    ];

    // Convert names to objects with codes
    const allCountriesData = allNames.map(name => ({
        name: name,
        code: nameCodeMap[name] || "+XX" // Assign code, defaulting if not found
    }));

    // Define priority countries for custom sorting (US, Mexico, Canada)
    const priorityNames = [
        "United States of America",
        "Mexico",
        "Canada",
        
    ];

    const priorityCountriesData = allCountriesData.filter(c => priorityNames.includes(c.name));
    const otherCountriesData = allCountriesData.filter(c => !priorityNames.includes(c.name));

    // Sort the rest alphabetically using the English part of the name
    otherCountriesData.sort((a, b) => {
        const keyA = getSortKey(a.name);
        const keyB = getSortKey(b.name);
        return keyA.localeCompare(keyB);
    });

    // Final combined list
    const COUNTRIES = priorityCountriesData.concat(otherCountriesData);

    function renderCountryList(filterText = '') {
        const container = document.getElementById('regulatory-country-list-container');
        container.innerHTML = '';
        const normalizedFilter = filterText.toLowerCase().trim();

        const filteredCountries = COUNTRIES.filter(country => {
            // Search against the full name AND the English part of the name
            const searchKey = country.name.toLowerCase();
            const sortKey = getSortKey(country.name).toLowerCase();
            return searchKey.includes(normalizedFilter) || sortKey.includes(normalizedFilter);
        });

        if (filteredCountries.length === 0) {
            container.innerHTML = '<p class="text-center text-gray-500 py-8">No countries found matching your search.</p>';
            return;
        }

        filteredCountries.forEach(country => {
            const item = document.createElement('div');
            // FIX 2: Removed justify-between and only render the name
            item.className = 'flex justify-start items-center py-3 px-3 rounded-lg cursor-pointer hover:bg-gray-100 transition duration-100 country-list-item';
            
            // Country Name (Left side)
            const nameSpan = document.createElement('span');
            nameSpan.className = 'text-klyr-dark text-base font-medium';
            nameSpan.textContent = country.name;
            
            // NOTE: Country code span removed entirely to fulfill user request
            
            item.appendChild(nameSpan);
            
            // Set the full display name as the value
            // UPDATED: Now calls selectCountry instead of regulatorySelectCountry
            item.addEventListener('click', () => selectCountry(country.name)); 
            container.appendChild(item);
        });
    }

    // RENAMED & FIXED: Now targets the Contact form IDs
    function selectCountry(countryName) {
        // FIXED: IDs now match the HTML form
        const hiddenInput = document.getElementById('contact-country-hidden');
        const displayBtn = document.getElementById('contact-country-display-btn');
        
        // 1. Update form value
        if(hiddenInput) hiddenInput.value = countryName;
        
        // 2. Update display button text and style (from gray placeholder to dark text)
        if(displayBtn) {
            displayBtn.textContent = countryName;
            displayBtn.classList.remove('text-gray-400');
            displayBtn.classList.add('text-klyr-dark');
        }
        
        closeContactModal();
    }

    // RENAMED to match the button onclick="openContactModal()"
    function openContactModal() {
        const modal = document.getElementById('regulatory-country-modal');
        const modalContent = document.getElementById('regulatory-modal-content');
        
        // Reset search and re-render list
        document.getElementById('regulatory-country-search-input').value = '';
        renderCountryList();
        
        modal.classList.remove('hidden');
        document.body.classList.add('overflow-hidden'); // Disable background scroll
        
        // Focus the search input for immediate typing on desktop
        document.getElementById('regulatory-country-search-input').focus();
        
        // Trigger transition (must be done after a short delay for CSS to register display change)
        setTimeout(() => {
            modal.classList.add('opacity-100');
            modalContent.classList.remove('scale-95');
            modalContent.classList.add('scale-100');
        }, 10);
    }

    // RENAMED to match
    function closeContactModal() {
        const modal = document.getElementById('regulatory-country-modal');
        const modalContent = document.getElementById('regulatory-modal-content');
        
        modal.classList.remove('opacity-100');
        modalContent.classList.remove('scale-100');
        modalContent.classList.add('scale-95');
        document.body.classList.remove('overflow-hidden');
        
        // Hide modal completely after transition ends
        setTimeout(() => {
            modal.classList.add('hidden');
        }, 300);
    }

    // ===================================================================
    // INITIALIZATION & NEW FORM/SCROLL LOGIC
    // ===================================================================
    document.addEventListener('DOMContentLoaded', () => {
        // FIXED: IDs updated to match Contact form
        const displayBtn = document.getElementById('contact-country-display-btn');
        const closeModalBtn = document.getElementById('regulatory-close-modal-btn');
        const searchInput = document.getElementById('regulatory-country-search-input');
        const modal = document.getElementById('regulatory-country-modal');
        const hiddenInput = document.getElementById('contact-country-hidden');
        
        // --- 1. Form Submission Logic ---
        const form = document.getElementById('contact-form'); // Fixed ID
        const formContent = document.getElementById('form-content');
        const successMessage = document.getElementById('success-message');

        if (form) {
            form.addEventListener('submit', function(e) {
                e.preventDefault(); // Stop default form submission/page reload
                
                // Hide form content and show success message
                formContent.classList.add('hidden');
                successMessage.classList.remove('hidden');
                
                // Scroll back to the top of the form area smoothly
                document.getElementById('contact-form-container').scrollIntoView({
                      behavior: 'smooth'
                });
            });
        }
        
        // --- 3. Modal Initialization ---
        
        // Set initial display text based on hidden input value
        if (hiddenInput && hiddenInput.value) {
            selectCountry(hiddenInput.value); // Re-select to set button style/text
        }

        // Close Modal on Backdrop Click
        if (modal) {
            modal.addEventListener('click', (e) => {
                // Only close if the click target is the modal backdrop itself
                if (e.target === modal) {
                    closeContactModal(); // CALLING RENAMED FUNCTION
                }
            });
        }

        // Search Filtering (real-time filtering)
        if (searchInput) {
            searchInput.addEventListener('input', (e) => {
                renderCountryList(e.target.value);
            });
        }
        
        // Initial render of country list on load
        renderCountryList();
    });
</script>
<script type="text/javascript">
     // ===================================================================
    // LUXURY FADE-IN ANIMATION LOGIC (Intersection Observer)
    // ===================================================================
    document.addEventListener('DOMContentLoaded', () => {
        const fadeSections = document.querySelectorAll('.fade-in-section');

        // Create the observer
        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                // Check if the element is currently visible in the viewport
                if (entry.isIntersecting) {
                    // Add the 'is-visible' class to trigger the CSS transition
                    entry.target.classList.add('is-visible');
                    // Stop observing the element once it has faded in
                    observer.unobserve(entry.target);
                }
            });
        }, {
            // Options for the observer
            root: null, // Use the viewport as the container
            rootMargin: '0px', // No extra margin
            threshold: 0.1 // Trigger when 10% of the item is visible
        });

        // Loop through all elements and observe them
        fadeSections.forEach((section, index) => {
            // Apply a staggered delay based on its order in the array
            // The delay is only applied if the delay style variable is defined on the element
            const delay = parseFloat(section.style.getPropertyValue('--delay') || '0');
            section.style.setProperty('--delay', `${delay + 0.05}s`); 
            
            observer.observe(section);
        });
    });
    
     // ===================================================================
    // BIO TOGGLE LOGIC (MODIFIED FOR OVERLAY)
    // ===================================================================
    function toggleBio(button) {
        // Look up to the group, then find the .profile-bio within that group
        const card = button.closest('.group');
        const bioContent = card.querySelector('.profile-bio');
        const icon = button.querySelector('i');
        const span = button.querySelector('span');
        
        if (bioContent.classList.contains('hidden')) {
            // Open
            bioContent.classList.remove('hidden');
            // Animate Icon Rotate
            icon.style.transform = 'rotate(180deg)';
            span.textContent = 'Close Bio';
        } else {
            // Close
            bioContent.classList.add('hidden');
            // Animate Icon Reset
            icon.style.transform = 'rotate(0deg)';
            span.textContent = 'Read Bio';
        }
    }
</script>

</body>
</html>